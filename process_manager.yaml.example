# Process Manager Configuration
# Add or remove programs to manage here

# Web UI settings
web_ui:
  host: "0.0.0.0"
  port: 10000
  title: "Trading System Services"

# Python Virtual Environment
# Path to venv directory (relative to this config file or absolute)
# Default: .venv (in the same directory as this config)
venv_path: ".venv"

# Restart settings
restart:
  delay_seconds: 1
  max_consecutive_failures: 10
  # Reset failure count after process runs stably for this many seconds
  # (prevents marking as broken if process runs fine for a while then crashes)
  failure_reset_seconds: 60

# Logging settings
logging:
  # Maximum log file size in MB before rotation (copytruncate method)
  # When exceeded, current log is copied to .log.1 and truncated
  max_size_mb: 10

# Programs to run and monitor
programs:
  - name: "Coinbase to Kafka"
    script: coinbase_to_kafka.py
    enabled: true
    cwd: "/data/production/trading/trading-coinbase"
    venv_path: "/data/production/trading/trading-coinbase/.venv"  # Optional: use program-specific venv, defaults to global venv_path
    # args: []  # Optional: command-line arguments

  - name: "Kafka to QuestDB"
    script: kafka_to_questdb.py
    enabled: true
    cwd: "/data/production/trading/trading-coinbase"
    venv_path: "/data/production/trading/trading-coinbase/.venv"  # Optional: use program-specific venv, defaults to global venv_path
    # args: []  # Optional: command-line arguments

  - name: "Kafka to MQTT"
    script: kafka_to_mqtt.py
    enabled: true
    cwd: "/data/production/trading/trading-coinbase"
    venv_path: "/data/production/trading/trading-coinbase/.venv"  # Optional: use program-specific venv, defaults to global venv_path
    # args: []  # Optional: command-line arguments
